{% extends "inicio/base_colima.html" %}
{% load i18n %}
{% load staticfiles %}
	{% block titulo %}Detalles Entregables{% endblock %}
	{% block extrascript %}
    <script>
     function detalle(detalle_entregable_id){
     	$.fancybox.showLoading();
		$.get('/administracion/detalle_detalle_entregable/'+detalle_entregable_id+'/', {}, function(data){ 
			$.fancybox({'content': data,
						'openEffect': 'elastic',
						'closeEffect': 'elastic',
						'afterClose':function(){ window.location.reload();},
					   });
		});   	
     }

     function aviso(detalle_entregable_id){
     	$.fancybox.showLoading();
     	var data = {mensaje: "¿Está seguro de querer eliminar este detalle_entregable?"}
     	$.get('/administracion/modal_aviso/', data, function(response){
     		$.fancybox({'content': response,
     					'afterShow':function(){
     						$('#aceptar').click(function(){
     								$(this).attr("disabled", "disabled");
									//$.fancybox.close();
									eliminar(detalle_entregable_id);
     						});

     						$("#cancelar").click(function(){
									$.fancybox.close();
     						});
     					},
     					});

     	});
     }

 
    </script>
    {% endblock %}

    {% block extrastyle %}
    <style>
    .bienvenida{
    	padding-right: 15px;
    }
    .menu{
    	padding-left: 15px;
    	width: 15%;
    }
    .panel{
    	width: 80%;
    	margin-left: 10%;
    	margin-right: 10%;
    }
    .agregar{
	    margin-left: 98%;
	    margin-top: -20px    	
    }
    </style>
    {% endblock %}
{% block breadcrumbs %}
<ol class="breadcrumb" style="margin-top:-20px">
	<li><a href="{% url 'administracion:index' %}">Inicio</a></li>
	<li class="active">Detalles de entregables</li>
</ol>
{% endblock %}
    {% block contenido %}
	<div class="panel panel-primary">
	  <!-- Default panel contents -->
	  <div class="panel-heading">
	  	  	Listado de detalles entregables
	  <div>
	  	<a title="Agregar nuevo" href="{% url 'administracion:crear-detalle-entregable' %}">
	  		<img class="agregar" src="{% static "icons/agregar.png" %}">
	  		<!-- <button type="button" class="btn btn-default agregar" />Agregar nuevo</button>-->
	  	</a>
	  </div>
	  </div>

	  <!-- Table -->
		<table class="table table-striped">
			<thead>
				<tr>
					<th>Entregable</th>
					<th>Nombre</th>
					<th>No.</th>
					<th>Creación</th>
					<th>Acciones</th>
				</tr>
			</thead>
			{% for detalle in detalles_entregables %}
			<tr>
				<td>{{ detalle.entregable }} </td>
				<td>{{ detalle.nombre }}</td>
				<td>{{ detalle.numero }}</td>
				<td>{{ detalle.fecha_creacion }}</td>
				<td>
					{% csrf_token %}
					<a onClick="detalle({{detalle.id}});" title="Consultar">
						<img src="{% static "icons/consultar.png" %}">
					</a>&nbsp; &nbsp;
					<a href="{% url 'administracion:editar-detalle-entregable' detalle.id %}" title="Editar" >
						<img src="{% static "icons/editar.png" %}"> 
					</a>
				</tr>
			{% endfor %}			
		</table>
	</div>	
	<div>
		<nav>
		  <ul class="pager">
		    {% if detalles_entregables.has_previous %}
	           <li><a href="?page={{ detalles_entregables.previous_page_number }}">Anterior</a></li> 
		    {% endif %}                                    
			Página {{ detalles_entregables.number }} de {{ detalles_entregables.paginator.num_pages }}
		    {% if detalles_entregables.has_next %}
	    		<li><a href="?page={{ detalles_entregables.next_page_number }}">Siguiente</a></li>
		    {% endif %}
		  </ul>
		</nav>	
	</div>
	{% endblock %}		